# ğŸš€ Streamlit Cloud éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. æ–‡ä»¶æ¸…å•ï¼ˆç¡®ä¿æ‰€æœ‰æ–‡ä»¶éƒ½å·²ä¸Šä¼ åˆ°GitHubï¼‰
```
your-repo/
â”œâ”€â”€ app.py                          # ä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ requirements.txt                # Pythonä¾èµ–
â”œâ”€â”€ packages.txt                    # ç³»ç»Ÿä¾èµ–ï¼ˆRç¯å¢ƒï¼‰
â”œâ”€â”€ install_r_packages.R            # RåŒ…å®‰è£…è„šæœ¬
â”œâ”€â”€ README.md                       # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ .gitignore                      # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ .streamlit/
    â””â”€â”€ config.toml                 # Streamlité…ç½®
```

### 2. GitHub ä»“åº“å‡†å¤‡
1. åˆ›å»ºæ–°çš„ GitHub ä»“åº“ï¼ˆå…¬å¼€æˆ–ç§æœ‰å‡å¯ï¼‰
2. å°†æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ åˆ°ä»“åº“
3. ç¡®è®¤æ–‡ä»¶ç»“æ„æ­£ç¡®

## ğŸŒ éƒ¨ç½²æ­¥éª¤

### Step 1: ç™»å½• Streamlit Cloud
1. è®¿é—® https://streamlit.io/cloud
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•

### Step 2: åˆ›å»ºæ–°åº”ç”¨
1. ç‚¹å‡» "New app" æŒ‰é’®
2. é€‰æ‹©ä½ çš„ GitHub ä»“åº“
3. é…ç½®ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Repository**: é€‰æ‹©ä½ åˆšåˆ›å»ºçš„ä»“åº“
   - **Branch**: main (æˆ– master)
   - **Main file path**: `app.py`
   - **App URL**: è‡ªå®šä¹‰æˆ–ä½¿ç”¨é»˜è®¤

### Step 3: é«˜çº§è®¾ç½®ï¼ˆå¯é€‰ï¼‰
ç‚¹å‡» "Advanced settings" è¿›è¡Œä»¥ä¸‹é…ç½®ï¼š
- **Python version**: 3.9, 3.10 æˆ– 3.11
- **Secrets**: å¦‚éœ€è¦é…ç½®å¯†é’¥

### Step 4: éƒ¨ç½²
1. ç‚¹å‡» "Deploy!" æŒ‰é’®
2. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé¦–æ¬¡çº¦5-10åˆ†é’Ÿï¼‰

## â±ï¸ éƒ¨ç½²æ—¶é—´è¯´æ˜

### é¦–æ¬¡éƒ¨ç½²ï¼ˆçº¦5-10åˆ†é’Ÿï¼‰
1. å®‰è£…Pythonç¯å¢ƒ (1-2åˆ†é’Ÿ)
2. å®‰è£…Rç¯å¢ƒ (2-3åˆ†é’Ÿ) â† æœ€è€—æ—¶
3. å®‰è£…PythonåŒ… (1åˆ†é’Ÿ)
4. å®‰è£…RåŒ… (2-4åˆ†é’Ÿ) â† æœ€è€—æ—¶
5. å¯åŠ¨åº”ç”¨ (30ç§’)

### åç»­æ›´æ–°ï¼ˆçº¦2-3åˆ†é’Ÿï¼‰
- å·²ç¼“å­˜çš„ä¾èµ–ä¸éœ€è¦é‡æ–°å®‰è£…
- åªæ›´æ–°ä¿®æ”¹çš„ä»£ç 

## ğŸ” éƒ¨ç½²çŠ¶æ€ç›‘æ§

### æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
1. åœ¨ Streamlit Cloud æ§åˆ¶å°ç‚¹å‡»åº”ç”¨
2. æŸ¥çœ‹ "Logs" æ ‡ç­¾é¡µ
3. ç›‘æ§å®‰è£…è¿›åº¦ï¼š
   ```
   Installing system packages...
   Installing R packages...
   Starting application...
   ```

### å¸¸è§æ—¥å¿—ä¿¡æ¯
```bash
# æ­£å¸¸å®‰è£…
âœ“ R environment installed
âœ“ R packages installed
âœ“ Application started

# å¯èƒ½å‡ºç°çš„è­¦å‘Šï¼ˆå¯å¿½ç•¥ï¼‰
Warning: locale not supported by C library
```

## âŒ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### 1. Rç¯å¢ƒå®‰è£…å¤±è´¥
**é”™è¯¯ä¿¡æ¯**:
```
Error: Unable to install r-base
```
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ `packages.txt` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- ç¡®è®¤æ–‡ä»¶å†…å®¹æ­£ç¡®ï¼š
  ```
  r-base
  r-base-dev
  ```

### 2. RåŒ…å®‰è£…è¶…æ—¶
**é”™è¯¯ä¿¡æ¯**:
```
Timeout while installing MALDIquant
```
**è§£å†³æ–¹æ¡ˆ**:
- åœ¨ `install_r_packages.R` ä¸­å¢åŠ è¶…æ—¶æ—¶é—´
- æˆ–è€…åœ¨åº”ç”¨å¯åŠ¨åæ‰‹åŠ¨å®‰è£…ï¼ˆåº”ç”¨ä¼šè‡ªåŠ¨å¤„ç†ï¼‰

### 3. å†…å­˜ä¸è¶³
**é”™è¯¯ä¿¡æ¯**:
```
MemoryError: Unable to allocate array
```
**è§£å†³æ–¹æ¡ˆ**:
- **å…è´¹ç‰ˆ**: é™åˆ¶å¤„ç†çš„æ ·æœ¬æ•°é‡ï¼ˆ<100ä¸ªï¼‰
- **å‡çº§æ–¹æ¡ˆ**: ä½¿ç”¨ Streamlit Cloud ä»˜è´¹ç‰ˆï¼ˆæ”¯æŒæ›´å¤§å†…å­˜ï¼‰

### 4. æ–‡ä»¶ä¸Šä¼ é™åˆ¶
**é”™è¯¯ä¿¡æ¯**:
```
File size exceeds limit
```
**è§£å†³æ–¹æ¡ˆ**:
- å·²åœ¨ `config.toml` ä¸­è®¾ç½® `maxUploadSize = 500` (500MB)
- å¦‚æœä»ç„¶ä¸å¤Ÿï¼Œéœ€è¦å‡çº§åˆ°ä»˜è´¹ç‰ˆ

### 5. åº”ç”¨å´©æºƒæˆ–æ— å“åº”
**å¯èƒ½åŸå› **:
- å¤„ç†æ•°æ®é‡è¿‡å¤§
- Rè„šæœ¬æ‰§è¡Œæ—¶é—´è¿‡é•¿

**è§£å†³æ–¹æ¡ˆ**:
```python
# åœ¨ run_r_script å‡½æ•°ä¸­è°ƒæ•´è¶…æ—¶æ—¶é—´
timeout=600  # ä»600ç§’å¢åŠ åˆ°1200ç§’
```

## ğŸ“Š èµ„æºé™åˆ¶

### Streamlit Cloud å…è´¹ç‰ˆ
- **CPU**: 1 æ ¸å¿ƒ
- **å†…å­˜**: 1 GB
- **å­˜å‚¨**: æœ‰é™
- **è¿è¡Œæ—¶é—´**: æ— é™åˆ¶
- **å¹¶å‘ç”¨æˆ·**: æ— é™åˆ¶

### ä»˜è´¹ç‰ˆï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰
- **CPU**: 2-4 æ ¸å¿ƒ
- **å†…å­˜**: 4-16 GB
- **å­˜å‚¨**: æ›´å¤§
- **ä¼˜å…ˆæ”¯æŒ**: âœ…

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. æ•°æ®å¤„ç†ä¼˜åŒ–
```python
# åˆ†æ‰¹å¤„ç†å¤§æ•°æ®é›†
if len(validation_spectra) > 200:
    st.warning("æ ·æœ¬æ•°é‡è¾ƒå¤šï¼Œå»ºè®®åˆ†æ‰¹å¤„ç†")
```

### 2. ç¼“å­˜ä¼˜åŒ–
```python
# å·²å®ç°çš„ç¼“å­˜
@st.cache_resource
def install_r_packages():
    # RåŒ…åªå®‰è£…ä¸€æ¬¡
```

### 3. è¿›åº¦æ˜¾ç¤º
```python
# å·²å®ç°è¯¦ç»†è¿›åº¦æ¡
progress_bar = st.progress(0)
status_text = st.empty()
```

## ğŸ“± è®¿é—®åº”ç”¨

éƒ¨ç½²æˆåŠŸåï¼Œä½ å°†è·å¾—ä¸€ä¸ªURLï¼š
```
https://your-app-name.streamlit.app
```

å¯ä»¥ï¼š
- åˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜
- åµŒå…¥åˆ°ç½‘ç«™
- æ·»åŠ åˆ°æ”¶è—å¤¹

## ğŸ”„ æ›´æ–°åº”ç”¨

### æ–¹æ³•1: é€šè¿‡ Git æ¨é€
```bash
git add .
git commit -m "Update feature"
git push origin main
```
Streamlit Cloud ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶é‡æ–°éƒ¨ç½²

### æ–¹æ³•2: é€šè¿‡ Streamlit Cloud æ§åˆ¶å°
1. ç‚¹å‡» "Reboot app" é‡å¯åº”ç”¨
2. ä¸éœ€è¦é‡æ–°å®‰è£…ä¾èµ–

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯**
2. **ä½¿ç”¨ Streamlit Secrets ç®¡ç†å¯†é’¥**
   ```toml
   # .streamlit/secrets.toml
   API_KEY = "your-secret-key"
   ```
3. **åœ¨ `.gitignore` ä¸­æ’é™¤æ•æ„Ÿæ–‡ä»¶**

## ğŸ“ è·å–å¸®åŠ©

### Streamlit å®˜æ–¹èµ„æº
- æ–‡æ¡£: https://docs.streamlit.io/
- è®ºå›: https://discuss.streamlit.io/
- GitHub: https://github.com/streamlit/streamlit

### ç¤¾åŒºæ”¯æŒ
- Stack Overflow: æ ‡ç­¾ `streamlit`
- Discord: Streamlit Community

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

åœ¨ç‚¹å‡» "Deploy" ä¹‹å‰ï¼Œç¡®è®¤ï¼š

- [ ] æ‰€æœ‰æ–‡ä»¶å·²ä¸Šä¼ åˆ° GitHub
- [ ] `app.py` æ–‡ä»¶åæ­£ç¡®
- [ ] `requirements.txt` åŒ…å«æ‰€æœ‰ Python ä¾èµ–
- [ ] `packages.txt` åŒ…å« R ç¯å¢ƒ
- [ ] `install_r_packages.R` è¯­æ³•æ­£ç¡®
- [ ] `.streamlit/config.toml` é…ç½®æ­£ç¡®
- [ ] `.gitignore` æ’é™¤äº†ä¸å¿…è¦çš„æ–‡ä»¶
- [ ] README.md æä¾›äº†æ¸…æ™°çš„è¯´æ˜

## ğŸ‰ éƒ¨ç½²æˆåŠŸï¼

æ­å–œï¼ä½ çš„ MALDI-TOF MS å¤„ç†å¹³å°å·²æˆåŠŸéƒ¨ç½²åˆ°äº‘ç«¯ï¼

ç°åœ¨ä½ å¯ä»¥ï¼š
1. é€šè¿‡æµè§ˆå™¨è®¿é—®åº”ç”¨
2. ä¸Šä¼ æ•°æ®è¿›è¡Œå¤„ç†
3. åˆ†äº«é“¾æ¥ç»™å›¢é˜Ÿæˆå‘˜
4. æŒç»­æ”¹è¿›å’Œä¼˜åŒ–

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ ğŸš€
